{% extends "base.html" %}

{% block body %}
{% if let Some(sidebar) = sidebar %}
<body hx-ext="sse" sse-connect="/events" class="sidebar" hx-target="#content" hx-select="#content">
  <sl-split-panel position-in-pixels="250" primary="start">
    <div slot="start" id="sidebar" hx-boost="true">
      <a class="sidebar-item link-item" href="/" ><sl-icon name="bookmark"></sl-icon> On Deck</a>
      {% for library in sidebar.libraries %}
        <a class="sidebar-item link-item link-prefix" href="/library/{{ library.server }}/{{ library.id }}">
          {% if library.library_type == LibraryType::Movie %}
            <sl-icon name="film"></sl-icon>
          {% else %}
            <sl-icon name="tv"></sl-icon>
          {% endif %}
          {{ library.title }}
        </a>
      {% endfor %}
      {% for playlist in sidebar.playlists %}
        <a class="sidebar-item link-item link-prefix" href="/playlist/{{ playlist.server }}/{{ playlist.id }}" ><sl-icon name="music-note-list"></sl-icon> {{ playlist.title }}</a>
      {% endfor %}
      <a id="sync-item" hx-target="#sync-item" class="sidebar-item link-item" href="/sync" sse-swap="sync-status"><sl-icon name="arrow-repeat"></sl-icon> Syncs</a>
    </div>
{% endif %}
    <div slot="end" id="content" hx-history-elt>
      {% block content %}{% endblock %}
    </div>
{% if let Some(sidebar) = sidebar %}
  </sl-split-panel>
</body>
{% endif %}
{% endblock %}
